<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­©ã¿ã‚µãƒãƒ¼ãƒˆ - å¸³ç¥¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ç·¨é›†</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #f5f7fa;
            color: #333;
            font-size: 18px;
            line-height: 1.7;
        }

        .header {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            color: #444;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            text-align: center;
        }

        .page-subtitle {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .tab-navigation {
            display: flex;
            background: white;
            border-radius: 15px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab-button {
            flex: 1;
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab-button.active {
            background: #67b279;
            color: white;
            box-shadow: 0 2px 10px rgba(103, 178, 121, 0.3);
        }

        .tab-button:hover {
            background: #f0f4ff;
        }

        .tab-button.active:hover {
            background: #5a9f68;
        }

        /* ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* å¸³ç¥¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ */
        .document-preview {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .document-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .document-title {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .edit-toggle {
            background: #67b279;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .edit-toggle:hover {
            background: #5a9f68;
            transform: translateY(-2px);
        }

        .edit-toggle.editing {
            background: #ff6b6b;
        }

        .edit-toggle.editing:hover {
            background: #ee5a52;
        }

        /* å¸³ç¥¨ãƒ•ã‚©ãƒ¼ãƒ  */
        .document-form {
            display: grid;
            gap: 2rem;
        }

        .form-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 5px solid #67b279;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1rem;
            margin-bottom: 1rem;
            align-items: start;
        }

        .form-label {
            font-weight: 600;
            color: #555;
            padding: 0.8rem 0;
        }

        .form-field {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 0.8rem;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-field:focus {
            outline: none;
            border-color: #67b279;
            box-shadow: 0 0 0 3px rgba(103, 178, 121, 0.1);
        }

        .form-field[contenteditable="true"] {
            min-height: 2.5rem;
            border-color: #67b279;
            background: #f9fff9;
        }

        .form-field.readonly {
            background: #f5f5f5;
            color: #777;
            cursor: not-allowed;
        }

        textarea.form-field {
            min-height: 100px;
            resize: vertical;
        }

        /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
        .actions-bar {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn {
            background: #67b279;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: #5a9f68;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(103, 178, 121, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #218838;
        }

        /* å¤‰æ›´é€šçŸ¥ */
        .changes-indicator {
            position: fixed;
            top: 100px;
            right: 20px;
            background: #ffeaa7;
            color: #333;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transform: translateX(300px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .changes-indicator.show {
            transform: translateX(0);
        }

        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªã‚¹ãƒˆ */
        .preview-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .preview-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .preview-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .preview-card.selected {
            border: 3px solid #67b279;
            background: #f9fff9;
        }

        .preview-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #2c3e50;
        }

        .preview-content {
            color: #666;
            font-size: 16px;
            line-height: 1.6;
        }

        .preview-status {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 1rem;
        }

        .status-draft {
            background: #fff3cd;
            color: #856404;
        }

        .status-editing {
            background: #d4edda;
            color: #155724;
        }

        .status-ready {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .tab-navigation {
                flex-direction: column;
                gap: 0.5rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .actions-bar {
                flex-direction: column;
            }

            .preview-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">ğŸŒ¸ æ­©ã¿ã‚µãƒãƒ¼ãƒˆ</div>
            <div>
                <a href="/workflow" style="color: #444; text-decoration: none; font-weight: 500;">â† é¢è«‡è¨˜éŒ²ä½œæˆã«æˆ»ã‚‹</a>
            </div>
        </div>
    </header>

    <div class="container">
        <h1 class="page-title">ğŸ“‹ å¸³ç¥¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ç·¨é›†</h1>
        <p class="page-subtitle">ä½œæˆã•ã‚ŒãŸæ›¸é¡ã‚’ç¢ºèªã—ã¦ã€å¿…è¦ãªä¿®æ­£ã‚’è¡Œãˆã¾ã™</p>

        <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="tab-navigation">
            <button class="tab-button active" onclick="switchTab('list')">ğŸ“‹ å¸³ç¥¨ä¸€è¦§</button>
            <button class="tab-button" onclick="switchTab('individual')">ğŸ‘¤ å€‹åˆ¥æ”¯æ´è¨ˆç”»æ›¸</button>
            <button class="tab-button" onclick="switchTab('monitoring')">ğŸ“Š ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨˜éŒ²</button>
            <button class="tab-button" onclick="switchTab('family')">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—å ±å‘Šæ›¸</button>
        </div>

        <!-- å¤‰æ›´é€šçŸ¥ -->
        <div class="changes-indicator" id="changesIndicator">
            ğŸ“ å¤‰æ›´ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“
        </div>

        <!-- ã‚¿ãƒ–1: å¸³ç¥¨ä¸€è¦§ -->
        <div class="tab-content active" id="tab-list">
            <div class="preview-list">
                <div class="preview-card selected" onclick="selectDocument('individual')" id="card-individual">
                    <div class="preview-title">ğŸ‘¤ å€‹åˆ¥æ”¯æ´è¨ˆç”»æ›¸</div>
                    <div class="preview-content">
                        åˆ©ç”¨è€…ã®åŸºæœ¬æƒ…å ±ã€ç¾åœ¨ã®çŠ¶æ³ã€æ”¯æ´ç›®æ¨™ã€å…·ä½“çš„ãªæ”¯æ´å†…å®¹ã‚’è¨˜è¼‰ã—ãŸåŸºæœ¬ã¨ãªã‚‹è¨ˆç”»æ›¸ã§ã™ã€‚
                    </div>
                    <div class="preview-status status-ready">ç·¨é›†å¯èƒ½</div>
                </div>

                <div class="preview-card" onclick="selectDocument('monitoring')" id="card-monitoring">
                    <div class="preview-title">ğŸ“Š ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨˜éŒ²</div>
                    <div class="preview-content">
                        æ”¯æ´ç›®æ¨™ã®é”æˆçŠ¶æ³ã€é€²æ—ã®è©•ä¾¡ã€ä»Šå¾Œã®èª²é¡Œã¨å¯¾å¿œæ–¹é‡ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
                    </div>
                    <div class="preview-status status-ready">ç·¨é›†å¯èƒ½</div>
                </div>

                <div class="preview-card" onclick="selectDocument('family')" id="card-family">
                    <div class="preview-title">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—å ±å‘Šæ›¸</div>
                    <div class="preview-content">
                        ã”å®¶æ—å‘ã‘ã«ã€åˆ©ç”¨è€…ã®æ§˜å­ã‚„æˆé•·ã€ä»Šå¾Œã®äºˆå®šã‚’ã‚ã‹ã‚Šã‚„ã™ãã¾ã¨ã‚ãŸå ±å‘Šæ›¸ã§ã™ã€‚
                    </div>
                    <div class="preview-status status-ready">ç·¨é›†å¯èƒ½</div>
                </div>

                <div class="preview-card" onclick="selectDocument('service')" id="card-service">
                    <div class="preview-title">ğŸ“‹ ã‚µãƒ¼ãƒ“ã‚¹æä¾›è¨˜éŒ²</div>
                    <div class="preview-content">
                        å®Ÿéš›ã«æä¾›ã—ãŸã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã€åˆ©ç”¨è€…ã®çŠ¶æ³ã€ç‰¹è¨˜äº‹é …ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
                    </div>
                    <div class="preview-status status-draft">ä¸‹æ›¸ã</div>
                </div>

                <div class="preview-card" onclick="selectDocument('assessment')" id="card-assessment">
                    <div class="preview-title">ğŸ“ ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã‚·ãƒ¼ãƒˆ</div>
                    <div class="preview-content">
                        åˆ©ç”¨è€…ã®èƒ½åŠ›ã‚„ç‰¹æ€§ã€æ”¯æ´ã®å¿…è¦æ€§ã‚’ç·åˆçš„ã«è©•ä¾¡ã—ãŸã‚·ãƒ¼ãƒˆã§ã™ã€‚
                    </div>
                    <div class="preview-status status-draft">ä¸‹æ›¸ã</div>
                </div>
            </div>

            <div class="actions-bar">
                <button class="btn" onclick="generateAllDocuments()">ğŸ“„ å…¨ã¦ã®å¸³ç¥¨ã‚’ç”Ÿæˆ</button>
                <button class="btn btn-secondary" onclick="previewPDF()">ğŸ‘ï¸ PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
                <button class="btn btn-success" onclick="downloadAll()">ğŸ“¥ ã™ã¹ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            </div>
        </div>

        <!-- ã‚¿ãƒ–2: å€‹åˆ¥æ”¯æ´è¨ˆç”»æ›¸ -->
        <div class="tab-content" id="tab-individual">
            <div class="document-preview">
                <div class="document-header">
                    <h2 class="document-title">ğŸ‘¤ å€‹åˆ¥æ”¯æ´è¨ˆç”»æ›¸</h2>
                    <button class="edit-toggle" onclick="toggleEdit('individual')" id="edit-btn-individual">âœï¸ ç·¨é›†ã™ã‚‹</button>
                </div>

                <div class="document-form" id="form-individual">
                    <div class="form-section">
                        <h3 class="section-title">åŸºæœ¬æƒ…å ±</h3>
                        <div class="form-row">
                            <div class="form-label">åˆ©ç”¨è€…å</div>
                            <div class="form-field readonly" contenteditable="false" id="user-name">ç”°ä¸­ èŠ±å­</div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">å¹´é½¢</div>
                            <div class="form-field readonly" contenteditable="false" id="user-age">28æ­³</div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">éšœå®³ç¨®åˆ¥</div>
                            <div class="form-field readonly" contenteditable="false" id="disability-type">çŸ¥çš„éšœå®³</div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">ä½œæˆæ—¥</div>
                            <div class="form-field readonly" contenteditable="false" id="creation-date">2024å¹´6æœˆ27æ—¥</div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">ç¾åœ¨ã®çŠ¶æ³</h3>
                        <div class="form-row">
                            <div class="form-label">æœ¬äººã®çŠ¶æ³</div>
                            <textarea class="form-field readonly" readonly id="current-situation">æœ€è¿‘ã€ãƒ‘ã‚½ã‚³ãƒ³ã®ä½œæ¥­ãŒå°‘ã—ãšã¤ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã—ãŸã€‚Excelã®åŸºæœ¬çš„ãªå…¥åŠ›ä½œæ¥­ã¯å•é¡Œãªãã§ãã¦ã„ã¾ã™ã€‚ãŸã ã€ã¾ã é›†ä¸­ã§ãã‚‹æ™‚é–“ãŒçŸ­ãã¦ã€1æ™‚é–“ãã‚‰ã„ãŒé™ç•Œã§ã™ã€‚</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">æœ¬äººã®å¸Œæœ›</div>
                            <textarea class="form-field readonly" readonly id="user-hopes">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®ä½œæ¥­ã‚’ã‚‚ã£ã¨ä¸Šæ‰‹ã«ãªã‚ŠãŸã„ã€‚å°†æ¥çš„ã«ã¯ä¸€èˆ¬ä¼æ¥­ã§åƒã‘ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">æ”¯æ´ç›®æ¨™</h3>
                        <div class="form-row">
                            <div class="form-label">é•·æœŸç›®æ¨™ï¼ˆ1å¹´ï¼‰</div>
                            <textarea class="form-field readonly" readonly id="long-term-goals">ä¸€èˆ¬ä¼æ¥­ã§ã®å°±åŠ´ã‚’ç›®æŒ‡ã—ã€å¿…è¦ãªã‚¹ã‚­ãƒ«ã‚’èº«ã«ã¤ã‘ã€ç¶™ç¶šã—ã¦åƒã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">çŸ­æœŸç›®æ¨™ï¼ˆ3ãƒ¶æœˆï¼‰</div>
                            <textarea class="form-field readonly" readonly id="short-term-goals">ãƒ»Excelã®é–¢æ•°ã‚’ä½¿ã£ãŸè¨ˆç®—æ¥­å‹™ã¸ã®æŒ‘æˆ¦
ãƒ»é›†ä¸­æ™‚é–“ã‚’1.5æ™‚é–“ã¾ã§å»¶é•·
ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ«ã®å‘ä¸Š</textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">æ”¯æ´å†…å®¹</h3>
                        <div class="form-row">
                            <div class="form-label">å…·ä½“çš„æ”¯æ´</div>
                            <textarea class="form-field readonly" readonly id="support-content">ãƒ»é€±3å›ã®ãƒ‘ã‚½ã‚³ãƒ³ä½œæ¥­è¨“ç·´
ãƒ»é›†ä¸­åŠ›å‘ä¸Šã®ãŸã‚ã®æ®µéšçš„ç·´ç¿’
ãƒ»è·å ´ã§ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç·´ç¿’
ãƒ»ä½œæ¥­ç’°å¢ƒã®èª¿æ•´ã¨ã‚µãƒãƒ¼ãƒˆ</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">è©•ä¾¡æ–¹æ³•</div>
                            <textarea class="form-field readonly" readonly id="evaluation-method">æœˆ1å›ã®é¢è«‡ã§é€²æ—ã‚’ç¢ºèªã€‚ä½œæ¥­æ™‚é–“ã€æ­£ç¢ºæ€§ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã‚’æ®µéšè©•ä¾¡ã€‚</textarea>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button class="btn" onclick="saveDocument('individual')">ğŸ’¾ å¤‰æ›´ã‚’ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="resetDocument('individual')">ğŸ”„ å…ƒã«æˆ»ã™</button>
                    <button class="btn btn-success" onclick="downloadDocument('individual')">ğŸ“¥ PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            </div>
        </div>

        <!-- ã‚¿ãƒ–3: ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨˜éŒ² -->
        <div class="tab-content" id="tab-monitoring">
            <div class="document-preview">
                <div class="document-header">
                    <h2 class="document-title">ğŸ“Š ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨˜éŒ²</h2>
                    <button class="edit-toggle" onclick="toggleEdit('monitoring')" id="edit-btn-monitoring">âœï¸ ç·¨é›†ã™ã‚‹</button>
                </div>

                <div class="document-form" id="form-monitoring">
                    <div class="form-section">
                        <h3 class="section-title">ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°åŸºæœ¬æƒ…å ±</h3>
                        <div class="form-row">
                            <div class="form-label">åˆ©ç”¨è€…å</div>
                            <div class="form-field readonly" contenteditable="false">ç”°ä¸­ èŠ±å­</div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æœŸé–“</div>
                            <div class="form-field readonly" contenteditable="false">2024å¹´3æœˆï½2024å¹´6æœˆ</div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">æ‹…å½“è·å“¡</div>
                            <div class="form-field readonly" contenteditable="false">ä½è—¤ å¥å¤ª</div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">ç›®æ¨™é”æˆçŠ¶æ³</h3>
                        <div class="form-row">
                            <div class="form-label">çŸ­æœŸç›®æ¨™ã®é”æˆåº¦</div>
                            <textarea class="form-field readonly" readonly>ãƒ»Excelã®åŸºæœ¬æ“ä½œï¼šé”æˆï¼ˆ100%ï¼‰
ãƒ»é›†ä¸­æ™‚é–“ã®å»¶é•·ï¼šéƒ¨åˆ†é”æˆï¼ˆ1æ™‚é–“â†’1æ™‚é–“30åˆ†ã€ç›®æ¨™ã¾ã§ã‚ã¨30åˆ†ï¼‰
ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼šæ”¹å–„ä¸­ï¼ˆç©æ¥µçš„ã«è³ªå•ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸï¼‰</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">æ”¯æ´ã®åŠ¹æœ</div>
                            <textarea class="form-field readonly" readonly>ãƒ‘ã‚½ã‚³ãƒ³ä½œæ¥­ã®ã‚¹ã‚­ãƒ«ãŒå¤§å¹…ã«å‘ä¸Šã—ã€è‡ªä¿¡ã‚’æŒã£ã¦ä½œæ¥­ã«å–ã‚Šçµ„ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚é›†ä¸­æ™‚é–“ã‚‚ç€å®Ÿã«å»¶é•·ã•ã‚Œã¦ãŠã‚Šã€ç›®æ¨™é”æˆã«å‘ã‘ã¦é †èª¿ã«é€²ã‚“ã§ã„ã¾ã™ã€‚</textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">èª²é¡Œã¨å¯¾å¿œ</h3>
                        <div class="form-row">
                            <div class="form-label">ç¾åœ¨ã®èª²é¡Œ</div>
                            <textarea class="form-field readonly" readonly>ãƒ»é•·æ™‚é–“ã®é›†ä¸­ãŒå›°é›£ï¼ˆç–²åŠ´ã«ã‚ˆã‚‹ä½œæ¥­åŠ¹ç‡ã®ä½ä¸‹ï¼‰
ãƒ»è¤‡é›‘ãªè¨ˆç®—æ¥­å‹™ã¸ã®ä¸å®‰
ãƒ»è·å ´ç’°å¢ƒã¸ã®é©å¿œã«é–¢ã™ã‚‹å¿ƒé…</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">æ¬¡æœŸæ”¯æ´æ–¹é‡</div>
                            <textarea class="form-field readonly" readonly>ãƒ»é›†ä¸­æ™‚é–“ã®æ®µéšçš„å»¶é•·ï¼ˆ15åˆ†åˆ»ã¿ã§å¢—åŠ ï¼‰
ãƒ»Excelé–¢æ•°ã®ç¿’å¾—æ”¯æ´ã‚’å¼·åŒ–
ãƒ»è·å ´è¦‹å­¦ã‚„å®Ÿç¿’ã®æ©Ÿä¼šã‚’æä¾›</textarea>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button class="btn" onclick="saveDocument('monitoring')">ğŸ’¾ å¤‰æ›´ã‚’ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="resetDocument('monitoring')">ğŸ”„ å…ƒã«æˆ»ã™</button>
                    <button class="btn btn-success" onclick="downloadDocument('monitoring')">ğŸ“¥ PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            </div>
        </div>

        <!-- ã‚¿ãƒ–4: å®¶æ—å ±å‘Šæ›¸ -->
        <div class="tab-content" id="tab-family">
            <div class="document-preview">
                <div class="document-header">
                    <h2 class="document-title">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—å ±å‘Šæ›¸</h2>
                    <button class="edit-toggle" onclick="toggleEdit('family')" id="edit-btn-family">âœï¸ ç·¨é›†ã™ã‚‹</button>
                </div>

                <div class="document-form" id="form-family">
                    <div class="form-section">
                        <h3 class="section-title">ã”å®¶æ—ã¸ã®å ±å‘Š</h3>
                        <div class="form-row">
                            <div class="form-label">åˆ©ç”¨è€…å</div>
                            <div class="form-field readonly" contenteditable="false">ç”°ä¸­ èŠ±å­ã•ã‚“</div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">å ±å‘ŠæœŸé–“</div>
                            <div class="form-field readonly" contenteditable="false">2024å¹´6æœˆ</div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">ä»Šæœˆã®æ§˜å­</h3>
                        <div class="form-row">
                            <div class="form-label">æˆé•·ã¨å¤‰åŒ–</div>
                            <textarea class="form-field readonly" readonly>èŠ±å­ã•ã‚“ã¯ä»Šæœˆã‚‚æ„æ¬²çš„ã«è¨“ç·´ã«å–ã‚Šçµ„ã¾ã‚Œã¾ã—ãŸã€‚ç‰¹ã«ãƒ‘ã‚½ã‚³ãƒ³ä½œæ¥­ã§ã¯å¤§ããªé€²æ­©ãŒè¦‹ã‚‰ã‚Œã€Excelã®åŸºæœ¬æ“ä½œã‚’ç¿’å¾—ã•ã‚Œã¾ã—ãŸã€‚é›†ä¸­ã—ã¦ä½œæ¥­ã«å–ã‚Šçµ„ã‚€æ™‚é–“ã‚‚å»¶ã³ã¦ãŠã‚Šã€è‡ªä¿¡ã‚’æŒã£ã¦ä½œæ¥­ã•ã‚Œã¦ã„ã‚‹æ§˜å­ãŒå°è±¡çš„ã§ã—ãŸã€‚</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">æ—¥å¸¸ç”Ÿæ´»ã§ã®å¤‰åŒ–</div>
                            <textarea class="form-field readonly" readonly>ä½œæ¥­ã«å¯¾ã™ã‚‹è‡ªä¿¡ãŒã¤ã„ãŸã“ã¨ã§ã€ä»–ã®æ´»å‹•ã«ã‚‚ç©æ¥µçš„ã«å‚åŠ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚è·å“¡ã‚„ä»–ã®åˆ©ç”¨è€…ã®æ–¹ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚æ´»ç™ºã«ãªã‚Šã€æ˜ã‚‹ã„è¡¨æƒ…ã§éã”ã•ã‚Œã¦ã„ã¾ã™ã€‚</textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">æ¥æœˆã®äºˆå®šã¨ãŠé¡˜ã„</h3>
                        <div class="form-row">
                            <div class="form-label">æ¥æœˆã®æ´»å‹•äºˆå®š</div>
                            <textarea class="form-field readonly" readonly>ãƒ»Excelé–¢æ•°ã®åŸºç¤å­¦ç¿’
ãƒ»é›†ä¸­æ™‚é–“å»¶é•·ã®ãŸã‚ã®è¨“ç·´ç¶™ç¶š
ãƒ»è·å ´è¦‹å­¦ã®å®Ÿæ–½ï¼ˆäºˆå®šï¼‰
ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ä¸Šãƒ—ãƒ­ã‚°ãƒ©ãƒ å‚åŠ </textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-label">ã”å®¶æ—ã¸ã®ãŠé¡˜ã„</div>
                            <textarea class="form-field readonly" readonly>ã”å®¶åº­ã§ã‚‚ã€èŠ±å­ã•ã‚“ãŒå­¦ã‚“ã ãƒ‘ã‚½ã‚³ãƒ³ã‚¹ã‚­ãƒ«ã‚’è¤’ã‚ã¦ã„ãŸã ãã€è‡ªä¿¡ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚ã‚‹ã‚ˆã†å¿œæ´ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚ã¾ãŸã€ä½•ã‹ã”å¿ƒé…ãªã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€ã„ã¤ã§ã‚‚ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã€‚</textarea>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button class="btn" onclick="saveDocument('family')">ğŸ’¾ å¤‰æ›´ã‚’ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="resetDocument('family')">ğŸ”„ å…ƒã«æˆ»ã™</button>
                    <button class="btn btn-success" onclick="downloadDocument('family')">ğŸ“¥ PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let hasUnsavedChanges = false;
        let editingStates = {
            individual: false,
            monitoring: false,
            family: false
        };

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            event.target.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');

            // å€‹åˆ¥å¸³ç¥¨é¸æŠæ™‚ã¯ã€è©²å½“ã‚«ãƒ¼ãƒ‰ã‚‚ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            if (tabName !== 'list') {
                selectDocument(tabName);
            }
        }

        // å¸³ç¥¨é¸æŠ
        function selectDocument(docType) {
            // ã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.preview-card').forEach(card => card.classList.remove('selected'));
            
            // é¸æŠã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            const selectedCard = document.getElementById('card-' + docType);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            // å¯¾å¿œã™ã‚‹ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
            if (docType !== 'service' && docType !== 'assessment') {
                switchTabProgrammatically(docType);
            }
        }

        // ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã‚ˆã‚‹ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTabProgrammatically(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‚’æ¢ã—ã¦ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(tabName)) {
                    btn.classList.add('active');
                }
            });

            document.getElementById('tab-' + tabName).classList.add('active');
        }

        // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
        function toggleEdit(docType) {
            const isEditing = editingStates[docType];
            const form = document.getElementById('form-' + docType);
            const button = document.getElementById('edit-btn-' + docType);
            
            if (isEditing) {
                // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰çµ‚äº†
                const fields = form.querySelectorAll('.form-field');
                fields.forEach(field => {
                    field.classList.add('readonly');
                    field.removeAttribute('contenteditable');
                    if (field.tagName === 'TEXTAREA') {
                        field.readOnly = true;
                    }
                });
                
                button.innerHTML = 'âœï¸ ç·¨é›†ã™ã‚‹';
                button.classList.remove('editing');
                editingStates[docType] = false;
                
            } else {
                // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰é–‹å§‹
                const fields = form.querySelectorAll('.form-field:not([id$="-name"]):not([id$="-age"]):not([id$="-date"])');
                fields.forEach(field => {
                    field.classList.remove('readonly');
                    if (field.tagName === 'TEXTAREA') {
                        field.readOnly = false;
                    } else {
                        field.setAttribute('contenteditable', 'true');
                    }
                });
                
                button.innerHTML = 'ğŸ‘ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼';
                button.classList.add('editing');
                editingStates[docType] = true;
            }
        }

        // å¤‰æ›´æ¤œçŸ¥
        function detectChanges() {
            hasUnsavedChanges = true;
            document.getElementById('changesIndicator').classList.add('show');
        }

        // æ–‡æ›¸ä¿å­˜
        function saveDocument(docType) {
            // ä¿å­˜å‡¦ç†ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            setTimeout(() => {
                hasUnsavedChanges = false;
                document.getElementById('changesIndicator').classList.remove('show');
                
                // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                showNotification('âœ… ä¿å­˜ãŒå®Œäº†ã—ã¾ã—ãŸ', 'success');
            }, 1000);
        }

        // æ–‡æ›¸ãƒªã‚»ãƒƒãƒˆ
        function resetDocument(docType) {
            if (confirm('å¤‰æ›´å†…å®¹ã‚’ç ´æ£„ã—ã¦å…ƒã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
                location.reload(); // ç°¡å˜ã®ãŸã‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿
            }
        }

        // æ–‡æ›¸ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadDocument(docType) {
            showNotification('ğŸ“¥ PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™', 'info');
        }

        // å…¨å¸³ç¥¨ç”Ÿæˆ
        function generateAllDocuments() {
            showNotification('ğŸ“„ å…¨ã¦ã®å¸³ç¥¨ã‚’ç”Ÿæˆä¸­...', 'info');
            
            // ç”ŸæˆçŠ¶æ³ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            setTimeout(() => {
                const cards = document.querySelectorAll('.preview-card');
                cards.forEach(card => {
                    const status = card.querySelector('.preview-status');
                    status.textContent = 'ç·¨é›†å¯èƒ½';
                    status.className = 'preview-status status-ready';
                });
                
                showNotification('âœ… å…¨ã¦ã®å¸³ç¥¨ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ', 'success');
            }, 3000);
        }

        // PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        function previewPDF() {
            showNotification('ğŸ‘ï¸ PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ã¾ã™', 'info');
        }

        // å…¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadAll() {
            showNotification('ğŸ“¥ å…¨ã¦ã®å¸³ç¥¨ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­...', 'info');
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#d4edda' : type === 'info' ? '#d1ecf1' : '#fff3cd'};
                color: ${type === 'success' ? '#155724' : type === 'info' ? '#0c5460' : '#856404'};
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                font-weight: 600;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        document.addEventListener('DOMContentLoaded', function() {
            // ç·¨é›†å¯èƒ½ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å¤‰æ›´æ¤œçŸ¥
            document.querySelectorAll('.form-field').forEach(field => {
                field.addEventListener('input', detectChanges);
            });

            // ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®è­¦å‘Š
            window.addEventListener('beforeunload', function(e) {
                if (hasUnsavedChanges) {
                    e.preventDefault();
                    e.returnValue = '';
                    return '';
                }
            });
        });

        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>